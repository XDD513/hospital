# 中医体质辨识与医院预约系统 - 需求分析文档

> **文档版本**: v1.0.0  
> **创建日期**: 2025-01-XX  
> **最后更新**: 2025-01-XX  
> **项目名称**: 中医体质辨识与医院预约系统

---

## 📋 文档说明

本文档详细描述了中医体质辨识与医院预约系统的功能需求、非功能需求和用户故事，为系统设计和开发提供指导。

---

## 1. 项目概述

### 1.1 项目背景

随着人们对健康管理需求的日益增长，传统的中医养生理念与现代医疗预约系统相结合，为患者提供个性化的健康管理服务。本系统旨在构建一个集中医体质辨识、医院预约、健康管理、养生知识分享于一体的综合性平台。

### 1.2 项目目标

1. **提供便捷的医院预约服务**：支持在线预约挂号，简化就医流程
2. **实现个性化健康管理**：基于中医体质辨识，提供定制化养生方案
3. **构建知识分享社区**：用户可分享养生经验，专家提供专业指导
4. **提升医疗服务质量**：优化医患沟通，提高诊疗效率

### 1.3 目标用户

- **患者**：需要预约挂号、健康管理、获取养生知识的普通用户
- **医生**：提供诊疗服务、管理预约、与患者沟通的医疗工作者
- **管理员**：负责系统管理、数据统计、内容审核的系统管理员

---

## 2. 功能需求

### 2.1 用户管理模块

#### 2.1.1 用户注册与登录

**功能描述**：
- 支持患者、医生、管理员三种角色的注册和登录
- 使用JWT Token进行身份认证
- 支持密码修改、找回密码功能

**用户故事**：
- 作为患者，我希望能够注册账号并登录系统，以便使用预约和健康管理功能
- 作为医生，我希望能够通过管理员分配的账号登录系统，以便管理我的预约和患者信息
- 作为管理员，我希望能够登录系统，以便进行系统管理和数据统计

**验收标准**：
- 用户能够成功注册并收到确认信息
- 登录后能够正确识别用户角色并跳转到对应页面
- Token过期后能够自动跳转到登录页

#### 2.1.2 用户信息管理

**功能描述**：
- 用户可以查看和编辑个人基本信息（姓名、性别、年龄、联系方式等）
- 支持头像上传（OSS对象存储）
- 患者可以查看和管理健康档案

**用户故事**：
- 作为患者，我希望能够编辑我的个人信息，以便医生能够更好地了解我的情况
- 作为医生，我希望能够查看患者的健康档案，以便提供更准确的诊疗建议

**验收标准**：
- 用户能够成功更新个人信息
- 头像上传后能够正确显示
- 健康档案信息完整且准确

---

### 2.2 预约挂号模块

#### 2.2.1 科室与医生管理

**功能描述**：
- 管理员可以添加、编辑、删除科室信息
- 管理员可以添加医生信息，分配医生到科室
- 患者可以浏览科室列表和医生信息

**用户故事**：
- 作为患者，我希望能够浏览所有科室和医生信息，以便选择合适的医生进行预约
- 作为管理员，我希望能够管理科室和医生信息，以便维护系统的医疗资源

**验收标准**：
- 科室和医生信息显示完整
- 管理员能够成功添加、编辑、删除科室和医生
- 医生信息包括姓名、职称、专长、头像等

#### 2.2.2 排班管理

**功能描述**：
- 医生可以设置自己的排班时间（上午、下午、晚间）
- 管理员可以查看和调整医生排班
- 系统自动计算每个时段的号源数量

**用户故事**：
- 作为医生，我希望能够设置我的排班时间，以便患者能够预约我的号源
- 作为管理员，我希望能够查看所有医生的排班情况，以便进行资源调配

**验收标准**：
- 医生能够成功设置排班时间
- 排班信息显示准确
- 号源数量计算正确

#### 2.2.3 预约挂号

**功能描述**：
- 患者可以选择科室、医生、日期和时段进行预约
- 系统自动分配排队号
- 支持预约取消功能
- 预约成功后发送通知消息

**用户故事**：
- 作为患者，我希望能够在线预约挂号，以便节省排队时间
- 作为患者，我希望能够取消预约，以便在需要时调整就诊时间

**验收标准**：
- 患者能够成功完成预约
- 排队号分配正确
- 预约取消后号源能够释放
- 通知消息及时发送

#### 2.2.4 预约管理

**功能描述**：
- 患者可以查看自己的预约记录（待就诊、已完成、已取消）
- 医生可以查看自己的预约列表
- 管理员可以查看所有预约记录并进行管理

**用户故事**：
- 作为患者，我希望能够查看我的预约记录，以便了解就诊安排
- 作为医生，我希望能够查看我的预约列表，以便提前准备诊疗工作

**验收标准**：
- 预约记录显示完整准确
- 支持按状态筛选预约记录
- 预约状态更新及时

---

### 2.3 中医体质辨识模块

#### 2.3.1 体质类型介绍

**功能描述**：
- 展示9种中医体质类型（平和质、气虚质、阳虚质、阴虚质、痰湿质、湿热质、血瘀质、气郁质、特禀质）
- 每种体质包含特征描述、养生建议、注意事项等

**用户故事**：
- 作为患者，我希望能够了解不同体质类型的特点，以便更好地理解我的体质测试结果

**验收标准**：
- 体质类型信息完整准确
- 展示方式清晰易懂

#### 2.3.2 体质测试问卷

**功能描述**：
- 提供66题的体质测试问卷
- 支持分页显示，每页显示一定数量的题目
- 自动保存答题进度
- 提交后自动计算体质得分

**用户故事**：
- 作为患者，我希望能够完成体质测试，以便了解我的体质类型并获得个性化养生建议

**验收标准**：
- 问卷题目显示完整
- 答题进度能够自动保存
- 测试结果计算准确

#### 2.3.3 测试结果与报告

**功能描述**：
- 显示主要体质类型和各项体质得分
- 提供详细的体质分析报告
- 给出针对性的养生建议
- 支持查看历史测试记录

**用户故事**：
- 作为患者，我希望能够查看我的体质测试结果和详细报告，以便了解我的身体状况并获得养生指导

**验收标准**：
- 测试结果准确反映用户体质
- 报告内容详细且易懂
- 历史记录能够正确保存和显示

#### 2.3.4 体质测试历史对比

**功能描述**：
- 支持查看历史测试记录
- 支持选择多条记录进行对比
- 使用雷达图展示不同时期体质得分的变化

**用户故事**：
- 作为患者，我希望能够对比不同时期的体质测试结果，以便了解我的体质变化趋势

**验收标准**：
- 历史记录显示完整
- 对比功能正常工作
- 雷达图展示清晰

---

### 2.4 健康管理模块

#### 2.4.1 健康档案

**功能描述**：
- 记录患者的基本健康信息（身高、体重、血压等）
- 记录既往病史、过敏史等
- 支持查看和编辑健康档案

**用户故事**：
- 作为患者，我希望能够维护我的健康档案，以便医生能够更好地了解我的健康状况

**验收标准**：
- 健康档案信息完整
- 支持信息的增删改查

#### 2.4.2 健康打卡

**功能描述**：
- 患者可以每日进行健康打卡
- 记录体重、睡眠时长、运动时长、心情等数据
- 支持查看打卡历史记录

**用户故事**：
- 作为患者，我希望能够每日记录我的健康数据，以便跟踪我的健康状况

**验收标准**：
- 打卡数据能够正确保存
- 历史记录显示完整

#### 2.4.3 健康数据统计

**功能描述**：
- 展示健康数据的趋势图表（体重、睡眠、运动、心情）
- 支持按日期范围筛选数据
- 使用ECharts展示数据可视化

**用户故事**：
- 作为患者，我希望能够查看我的健康数据趋势，以便了解我的健康状况变化

**验收标准**：
- 图表展示准确
- 数据筛选功能正常
- 图表交互流畅

---

### 2.5 药膳推荐模块

#### 2.5.1 药膳列表

**功能描述**：
- 展示所有药膳食谱
- 支持按体质、季节、功效进行筛选
- 支持关键词搜索
- 显示药膳的详细信息（食材、做法、功效等）

**用户故事**：
- 作为患者，我希望能够浏览药膳食谱，以便选择适合我的养生食谱
- 作为患者，我希望能够按体质筛选药膳，以便找到最适合我的食谱

**验收标准**：
- 药膳列表显示完整
- 筛选功能正常工作
- 搜索功能准确

#### 2.5.2 药膳详情

**功能描述**：
- 显示药膳的详细制作步骤
- 显示食材清单和用量
- 显示适用体质和功效说明
- 支持收藏功能

**用户故事**：
- 作为患者，我希望能够查看药膳的详细制作方法，以便自己制作养生食谱

**验收标准**：
- 详情信息完整准确
- 收藏功能正常

#### 2.5.3 个性化推荐

**功能描述**：
- 根据用户的体质类型推荐合适的药膳
- 根据季节推荐时令药膳
- 根据用户的历史浏览和收藏推荐

**用户故事**：
- 作为患者，我希望系统能够根据我的体质推荐适合的药膳，以便获得个性化的养生建议

**验收标准**：
- 推荐结果准确
- 推荐逻辑合理

---

### 2.6 穴位指导模块

#### 2.6.1 穴位列表

**功能描述**：
- 展示所有穴位信息
- 支持按经络、功效进行筛选
- 支持关键词搜索
- 显示穴位的基本信息（位置、功效、按摩方法等）

**用户故事**：
- 作为患者，我希望能够浏览穴位信息，以便学习穴位按摩方法

**验收标准**：
- 穴位列表显示完整
- 筛选和搜索功能正常

#### 2.6.2 穴位详情

**功能描述**：
- 显示穴位的详细位置图
- 显示按摩方法和注意事项
- 显示适用症状和功效
- 支持收藏功能

**用户故事**：
- 作为患者，我希望能够查看穴位的详细信息和按摩方法，以便进行自我保健

**验收标准**：
- 详情信息完整准确
- 位置图清晰

#### 2.6.3 穴位组合方案

**功能描述**：
- 提供针对不同症状的穴位组合方案
- 显示组合方案的详细说明和操作步骤

**用户故事**：
- 作为患者，我希望能够找到针对特定症状的穴位组合方案，以便进行综合调理

**验收标准**：
- 组合方案信息完整
- 操作步骤清晰

---

### 2.7 养生知识社区模块

#### 2.7.1 文章列表

**功能描述**：
- 展示所有养生文章
- 支持按分类（体质养生、饮食养生、运动养生、穴位养生、季节养生等）筛选
- 支持按标签筛选
- 支持关键词搜索
- 显示文章的摘要、作者、浏览量、点赞数、评论数等

**用户故事**：
- 作为患者，我希望能够浏览养生文章，以便学习养生知识
- 作为患者，我希望能够按分类和标签筛选文章，以便找到我感兴趣的内容

**验收标准**：
- 文章列表显示完整
- 筛选和搜索功能正常
- 文章信息准确

#### 2.7.2 文章详情

**功能描述**：
- 显示文章的完整内容
- 显示作者信息和发布时间
- 支持点赞、收藏、评论功能
- 显示相关文章推荐

**用户故事**：
- 作为患者，我希望能够阅读文章的完整内容，以便深入学习养生知识
- 作为患者，我希望能够对文章进行点赞、收藏和评论，以便表达我的观点

**验收标准**：
- 文章内容显示完整
- 点赞、收藏、评论功能正常

#### 2.7.3 文章发布

**功能描述**：
- 用户（患者、医生）可以发布养生文章
- 支持富文本编辑
- 支持上传封面图片
- 支持设置分类和标签

**用户故事**：
- 作为患者，我希望能够发布我的养生经验，以便与其他用户分享
- 作为医生，我希望能够发布专业的养生知识，以便帮助患者

**验收标准**：
- 文章发布功能正常
- 富文本编辑功能正常
- 图片上传功能正常

#### 2.7.4 文章评论

**功能描述**：
- 用户可以对文章进行评论
- 支持回复评论
- 支持点赞评论
- 支持删除自己的评论

**用户故事**：
- 作为患者，我希望能够对文章进行评论，以便与其他用户交流

**验收标准**：
- 评论功能正常
- 回复功能正常
- 点赞功能正常

---

### 2.8 医患对话模块

#### 2.8.1 会话管理

**功能描述**：
- 患者可以与医生建立会话
- 管理员可以与用户建立会话
- 支持查看会话列表
- 支持删除会话

**用户故事**：
- 作为患者，我希望能够与医生建立会话，以便进行在线咨询
- 作为医生，我希望能够查看与患者的会话列表，以便管理我的咨询工作

**验收标准**：
- 会话创建功能正常
- 会话列表显示完整
- 删除功能正常

#### 2.8.2 实时消息

**功能描述**：
- 支持实时发送和接收消息（WebSocket）
- 支持文本、图片、文件等消息类型
- 支持消息已读/未读状态
- 支持消息推送通知

**用户故事**：
- 作为患者，我希望能够与医生实时交流，以便获得及时的医疗咨询
- 作为医生，我希望能够实时接收患者消息，以便及时回复

**验收标准**：
- 消息发送和接收正常
- 消息推送及时
- 已读/未读状态准确

#### 2.8.3 消息通知

**功能描述**：
- 系统自动发送预约确认、预约取消、接诊完成等通知
- 医生回复消息时自动通知患者
- 支持站内消息中心查看所有通知
- 支持按类型筛选通知
- 支持批量标记已读

**用户故事**：
- 作为患者，我希望能够及时收到预约和消息通知，以便了解我的预约状态和医生回复
- 作为患者，我希望能够在消息中心查看所有通知，以便统一管理我的消息

**验收标准**：
- 通知发送及时
- 消息中心功能完整
- 筛选和批量操作功能正常

---

### 2.9 评价反馈模块

#### 2.9.1 医生评价

**功能描述**：
- 患者可以对医生进行评价
- 支持评分（1-5星）和文字评价
- 支持查看评价历史

**用户故事**：
- 作为患者，我希望能够对医生进行评价，以便表达我的满意度

**验收标准**：
- 评价功能正常
- 评价信息保存准确

#### 2.9.2 评价管理

**功能描述**：
- 医生可以查看自己的评价列表
- 管理员可以查看所有评价
- 支持评价回复功能

**用户故事**：
- 作为医生，我希望能够查看患者对我的评价，以便改进我的服务质量

**验收标准**：
- 评价列表显示完整
- 回复功能正常

---

### 2.10 数据统计模块

#### 2.10.1 患者端统计

**功能描述**：
- 显示累计预约数
- 显示待就诊数
- 显示健康打卡统计

**用户故事**：
- 作为患者，我希望能够查看我的预约和健康数据统计，以便了解我的就医和健康管理情况

**验收标准**：
- 统计数据准确
- 显示清晰

#### 2.10.2 医生端统计

**功能描述**：
- 显示今日预约数
- 显示待处理预约数
- 显示接诊记录统计

**用户故事**：
- 作为医生，我希望能够查看我的工作统计，以便了解我的工作量

**验收标准**：
- 统计数据准确
- 实时更新

#### 2.10.3 管理员端统计

**功能描述**：
- 显示系统用户数、今日预约数等基础统计
- 显示医生工作量统计（柱状图）
- 显示科室预约热力图
- 显示实时预约数据看板（仪表盘、饼图）

**用户故事**：
- 作为管理员，我希望能够查看系统的整体数据统计，以便进行系统管理和资源调配

**验收标准**：
- 统计数据准确
- 图表展示清晰
- 实时更新

---

### 2.11 搜索功能模块

#### 2.11.1 全局搜索

**功能描述**：
- 支持搜索医生、药膳、文章、穴位等
- 支持按类型筛选搜索结果
- 显示搜索历史记录
- 显示热门搜索词

**用户故事**：
- 作为患者，我希望能够快速搜索我需要的内容，以便提高使用效率

**验收标准**：
- 搜索结果准确
- 搜索历史记录正常
- 热门搜索词显示正常

#### 2.11.2 搜索历史

**功能描述**：
- 自动保存搜索历史（LocalStorage）
- 支持查看和清除搜索历史
- 支持点击历史记录快速搜索

**用户故事**：
- 作为患者，我希望能够查看我的搜索历史，以便快速重复之前的搜索

**验收标准**：
- 搜索历史保存正常
- 清除功能正常

#### 2.11.3 热门搜索词

**功能描述**：
- 使用Redis Sorted Set记录搜索关键词热度
- 显示热门搜索词列表
- 支持点击热门词快速搜索

**用户故事**：
- 作为患者，我希望能够看到热门搜索词，以便发现热门内容

**验收标准**：
- 热门搜索词计算准确
- 显示正常

---

## 3. 非功能需求

### 3.1 性能需求

- **响应时间**：页面加载时间不超过3秒，API响应时间不超过1秒
- **并发支持**：支持至少1000个并发用户
- **数据处理**：支持大数据量的查询和统计，响应时间在可接受范围内

### 3.2 可用性需求

- **系统可用性**：系统可用性达到99%以上
- **故障恢复**：系统故障后能够在30分钟内恢复
- **数据备份**：定期进行数据备份，确保数据安全

### 3.3 安全性需求

- **身份认证**：使用JWT Token进行身份认证，Token有效期可配置
- **数据加密**：敏感数据（如密码）进行加密存储
- **权限控制**：基于角色的权限控制，不同角色访问不同功能
- **SQL注入防护**：使用MyBatis参数化查询，防止SQL注入
- **XSS防护**：对用户输入进行过滤和转义，防止XSS攻击

### 3.4 兼容性需求

- **浏览器兼容**：支持Chrome、Firefox、Safari、Edge等主流浏览器
- **移动端适配**：支持响应式设计，在移动设备上正常显示和使用
- **数据库兼容**：支持MySQL 8.0及以上版本

### 3.5 可维护性需求

- **代码规范**：遵循统一的代码规范，使用Lombok简化代码
- **文档完善**：提供完整的API文档、数据库设计文档、部署文档等
- **日志记录**：记录关键操作日志，便于问题排查
- **异常处理**：统一的异常处理机制，便于错误定位和处理

### 3.6 可扩展性需求

- **模块化设计**：采用模块化设计，便于功能扩展
- **接口设计**：RESTful API设计，便于第三方系统集成
- **缓存机制**：使用Redis缓存，提高系统性能，支持水平扩展

---

## 4. 用户角色与权限

### 4.1 患者（PATIENT）

**权限范围**：
- 查看和编辑个人信息
- 预约挂号
- 查看预约记录
- 进行体质测试
- 查看健康档案和统计数据
- 浏览和搜索药膳、穴位、文章
- 发布和评论文章
- 与医生对话
- 评价医生
- 查看消息通知

**限制**：
- 不能管理其他用户
- 不能管理医生和科室
- 不能查看系统统计数据

### 4.2 医生（DOCTOR）

**权限范围**：
- 查看和编辑个人信息
- 管理自己的排班
- 查看自己的预约列表
- 查看患者信息
- 与患者对话
- 完成接诊记录
- 查看患者评价
- 发布和评论文章
- 查看消息通知

**限制**：
- 不能管理其他医生
- 不能管理系统配置
- 不能查看系统统计数据

### 4.3 管理员（ADMIN）

**权限范围**：
- 所有患者和医生的权限
- 管理用户（患者、医生）
- 管理科室和医生
- 管理系统配置
- 查看系统统计数据
- 查看操作日志
- 与用户建立会话（用于客服）

**限制**：
- 不能修改系统核心配置（需通过配置文件）

---

## 5. 数据需求

### 5.1 用户数据

- 用户基本信息（姓名、性别、年龄、联系方式等）
- 用户认证信息（用户名、密码、Token等）
- 用户角色和权限信息

### 5.2 预约数据

- 预约记录（患者、医生、时间、状态等）
- 排班信息（医生、日期、时段等）
- 科室和医生信息

### 5.3 健康数据

- 体质测试记录
- 健康档案信息
- 健康打卡记录

### 5.4 内容数据

- 药膳食谱信息
- 穴位信息
- 养生文章
- 评论和点赞数据

### 5.5 对话数据

- 会话记录
- 消息记录
- 通知记录

---

## 6. 接口需求

### 6.1 RESTful API设计

- 遵循RESTful设计规范
- 使用HTTP标准方法（GET、POST、PUT、DELETE）
- 统一的响应格式（Result<T>）
- 统一的错误处理机制

### 6.2 认证机制

- 使用JWT Token进行身份认证
- Token通过Authorization请求头传递
- Token存储在Redis中，支持过期时间配置

### 6.3 接口文档

- 使用Swagger生成API文档
- 所有接口提供详细的参数说明和示例
- 支持在线测试接口

---

## 7. 界面需求

### 7.1 设计风格

- 采用现代化、简洁的设计风格
- 支持响应式布局，适配不同屏幕尺寸
- 使用Element Plus组件库，保证UI一致性

### 7.2 用户体验

- 操作流程简单直观
- 提供清晰的反馈信息
- 支持快捷键操作
- 支持数据可视化展示（ECharts）

### 7.3 可访问性

- 支持键盘导航
- 提供清晰的错误提示
- 支持屏幕阅读器

---

## 8. 部署需求

### 8.1 环境要求

- **后端**：JDK 17+、Maven 3.6+、MySQL 8.0+、Redis 6.0+
- **前端**：Node.js 16+、npm或yarn
- **服务器**：Linux或Windows Server

### 8.2 配置管理

- 使用Nacos进行配置中心管理
- 支持多环境配置（开发、测试、生产）
- 敏感配置加密存储

### 8.3 监控与日志

- 集成日志系统，记录关键操作
- 支持系统监控和告警
- 定期备份数据库

---

## 9. 测试需求

### 9.1 单元测试

- 核心业务逻辑编写单元测试
- 测试覆盖率不低于70%

### 9.2 集成测试

- 测试各模块之间的集成
- 测试API接口的正确性

### 9.3 性能测试

- 进行压力测试，验证系统性能
- 进行并发测试，验证系统稳定性

---

## 10. 项目约束

### 10.1 技术约束

- 后端必须使用Spring Boot框架
- 前端必须使用Vue 3框架
- 数据库必须使用MySQL
- 缓存必须使用Redis

### 10.2 时间约束

- 项目开发周期：根据实际情况确定
- 各功能模块按优先级逐步实现

### 10.3 资源约束

- 开发人员：根据实际情况确定
- 服务器资源：根据实际需求配置

---

## 11. 验收标准

### 11.1 功能验收

- 所有功能需求均已实现
- 功能符合用户故事描述
- 功能测试通过

### 11.2 性能验收

- 系统响应时间符合性能需求
- 并发支持符合要求
- 系统稳定性良好

### 11.3 安全验收

- 通过安全测试
- 无严重安全漏洞
- 数据安全可靠

---

## 12. 附录

### 12.1 术语表

- **JWT**：JSON Web Token，一种用于身份认证的令牌
- **OSS**：Object Storage Service，对象存储服务
- **WebSocket**：一种在单个TCP连接上进行全双工通信的协议
- **RESTful**：一种软件架构风格，用于设计网络应用程序的API

### 12.2 参考资料

- Spring Boot官方文档
- Vue 3官方文档
- Element Plus官方文档
- MyBatis-Plus官方文档

---

**文档结束**

