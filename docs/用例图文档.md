# 中医体质辨识与医院预约系统 - 用例图文档

> **文档版本**: v1.0.0  
> **创建日期**: 2025-01-XX  
> **最后更新**: 2025-01-XX

---

## 📋 文档说明

本文档使用文字描述的方式展示系统的用例图，描述各角色与系统功能之间的交互关系。

---

## 1. 系统用例图总览

### 1.1 参与者（Actor）

系统包含以下参与者：

1. **患者（Patient）**：使用系统进行预约、健康管理、获取养生知识的普通用户
2. **医生（Doctor）**：提供诊疗服务、管理预约、与患者沟通的医疗工作者
3. **管理员（Admin）**：负责系统管理、数据统计、内容审核的系统管理员

### 1.2 系统边界

系统边界包含以下主要功能模块：
- 用户管理模块
- 预约挂号模块
- 中医体质辨识模块
- 健康管理模块
- 药膳推荐模块
- 穴位指导模块
- 养生知识社区模块
- 医患对话模块
- 评价反馈模块
- 数据统计模块
- 搜索功能模块

---

## 2. 患者用例图

### 2.1 用户管理用例

```
患者
├── 注册账号
├── 登录系统
├── 修改密码
├── 查看个人信息
└── 编辑个人信息
```

**用例描述**：
- **注册账号**：患者可以注册新账号，填写基本信息（姓名、性别、年龄、联系方式等）
- **登录系统**：患者使用用户名和密码登录系统
- **修改密码**：患者可以修改登录密码
- **查看个人信息**：患者可以查看自己的个人信息
- **编辑个人信息**：患者可以编辑个人信息，包括上传头像

### 2.2 预约挂号用例

```
患者
├── 浏览科室列表
├── 浏览医生列表
├── 查看医生详情
├── 预约挂号
├── 查看预约记录
├── 取消预约
└── 查看预约详情
```

**用例描述**：
- **浏览科室列表**：患者可以查看所有科室信息
- **浏览医生列表**：患者可以查看某个科室下的所有医生
- **查看医生详情**：患者可以查看医生的详细信息（姓名、职称、专长、头像等）
- **预约挂号**：患者可以选择科室、医生、日期和时段进行预约
- **查看预约记录**：患者可以查看自己的所有预约记录（待就诊、已完成、已取消）
- **取消预约**：患者可以取消未就诊的预约
- **查看预约详情**：患者可以查看预约的详细信息

### 2.3 中医体质辨识用例

```
患者
├── 查看体质类型介绍
├── 进行体质测试
├── 查看测试结果
├── 查看测试报告
├── 查看测试历史
└── 对比历史测试结果
```

**用例描述**：
- **查看体质类型介绍**：患者可以查看9种体质类型的详细介绍
- **进行体质测试**：患者可以完成66题的体质测试问卷
- **查看测试结果**：患者可以查看测试结果（主要体质类型和各项得分）
- **查看测试报告**：患者可以查看详细的体质分析报告和养生建议
- **查看测试历史**：患者可以查看历史测试记录
- **对比历史测试结果**：患者可以选择多条历史记录进行对比，查看体质变化趋势

### 2.4 健康管理用例

```
患者
├── 查看健康档案
├── 编辑健康档案
├── 进行健康打卡
├── 查看打卡历史
└── 查看健康数据统计
```

**用例描述**：
- **查看健康档案**：患者可以查看自己的健康档案信息
- **编辑健康档案**：患者可以编辑健康档案（身高、体重、血压、既往病史等）
- **进行健康打卡**：患者可以每日进行健康打卡，记录体重、睡眠、运动、心情等数据
- **查看打卡历史**：患者可以查看历史打卡记录
- **查看健康数据统计**：患者可以查看健康数据的趋势图表（体重、睡眠、运动、心情）

### 2.5 药膳推荐用例

```
患者
├── 浏览药膳列表
├── 搜索药膳
├── 筛选药膳（按体质、季节、功效）
├── 查看药膳详情
├── 收藏药膳
├── 查看收藏的药膳
└── 查看推荐药膳
```

**用例描述**：
- **浏览药膳列表**：患者可以浏览所有药膳食谱
- **搜索药膳**：患者可以通过关键词搜索药膳
- **筛选药膳**：患者可以按体质、季节、功效筛选药膳
- **查看药膳详情**：患者可以查看药膳的详细制作方法、食材清单、功效说明等
- **收藏药膳**：患者可以收藏喜欢的药膳
- **查看收藏的药膳**：患者可以查看自己收藏的所有药膳
- **查看推荐药膳**：患者可以查看系统根据体质推荐的药膳

### 2.6 穴位指导用例

```
患者
├── 浏览穴位列表
├── 搜索穴位
├── 筛选穴位（按经络、功效）
├── 查看穴位详情
├── 查看穴位组合方案
└── 收藏穴位
```

**用例描述**：
- **浏览穴位列表**：患者可以浏览所有穴位信息
- **搜索穴位**：患者可以通过关键词搜索穴位
- **筛选穴位**：患者可以按经络、功效筛选穴位
- **查看穴位详情**：患者可以查看穴位的详细位置图、按摩方法、功效说明等
- **查看穴位组合方案**：患者可以查看针对不同症状的穴位组合方案
- **收藏穴位**：患者可以收藏常用的穴位

### 2.7 养生知识社区用例

```
患者
├── 浏览文章列表
├── 搜索文章
├── 筛选文章（按分类、标签）
├── 查看文章详情
├── 发布文章
├── 编辑文章
├── 删除文章
├── 点赞文章
├── 收藏文章
├── 评论文章
├── 回复评论
└── 查看我的文章
```

**用例描述**：
- **浏览文章列表**：患者可以浏览所有养生文章
- **搜索文章**：患者可以通过关键词搜索文章
- **筛选文章**：患者可以按分类、标签筛选文章
- **查看文章详情**：患者可以查看文章的完整内容
- **发布文章**：患者可以发布自己的养生经验文章
- **编辑文章**：患者可以编辑自己发布的文章
- **删除文章**：患者可以删除自己发布的文章
- **点赞文章**：患者可以对文章进行点赞
- **收藏文章**：患者可以收藏喜欢的文章
- **评论文章**：患者可以对文章进行评论
- **回复评论**：患者可以回复其他用户的评论
- **查看我的文章**：患者可以查看自己发布的所有文章

### 2.8 医患对话用例

```
患者
├── 创建会话
├── 查看会话列表
├── 发送消息
├── 接收消息
├── 查看消息历史
└── 删除会话
```

**用例描述**：
- **创建会话**：患者可以与医生创建会话
- **查看会话列表**：患者可以查看与所有医生的会话列表
- **发送消息**：患者可以向医生发送文本、图片、文件等消息
- **接收消息**：患者可以实时接收医生的回复消息
- **查看消息历史**：患者可以查看会话中的历史消息
- **删除会话**：患者可以删除不需要的会话

### 2.9 评价反馈用例

```
患者
├── 评价医生
├── 查看评价历史
└── 查看医生评价列表
```

**用例描述**：
- **评价医生**：患者可以对就诊的医生进行评价（评分和文字评价）
- **查看评价历史**：患者可以查看自己给医生的所有评价
- **查看医生评价列表**：患者可以查看其他患者对医生的评价

### 2.10 搜索功能用例

```
患者
├── 全局搜索
├── 查看搜索历史
├── 清除搜索历史
└── 查看热门搜索词
```

**用例描述**：
- **全局搜索**：患者可以搜索医生、药膳、文章、穴位等内容
- **查看搜索历史**：患者可以查看自己的搜索历史记录
- **清除搜索历史**：患者可以清除搜索历史
- **查看热门搜索词**：患者可以查看热门搜索词列表

### 2.11 消息通知用例

```
患者
├── 查看消息中心
├── 查看通知详情
├── 标记通知为已读
├── 批量标记已读
└── 按类型筛选通知
```

**用例描述**：
- **查看消息中心**：患者可以在消息中心查看所有通知
- **查看通知详情**：患者可以查看通知的详细内容
- **标记通知为已读**：患者可以标记单个通知为已读
- **批量标记已读**：患者可以批量标记多个通知为已读
- **按类型筛选通知**：患者可以按通知类型（预约、消息、系统通知等）筛选通知

---

## 3. 医生用例图

### 3.1 用户管理用例

```
医生
├── 登录系统
├── 修改密码
├── 查看个人信息
└── 编辑个人信息
```

**用例描述**：
- **登录系统**：医生使用管理员分配的账号登录系统
- **修改密码**：医生可以修改登录密码
- **查看个人信息**：医生可以查看自己的个人信息
- **编辑个人信息**：医生可以编辑个人信息，包括上传头像

### 3.2 预约管理用例

```
医生
├── 查看预约列表
├── 查看预约详情
├── 查看患者信息
└── 管理排班
```

**用例描述**：
- **查看预约列表**：医生可以查看自己的所有预约记录
- **查看预约详情**：医生可以查看预约的详细信息
- **查看患者信息**：医生可以查看患者的健康档案和基本信息
- **管理排班**：医生可以设置自己的排班时间（上午、下午、晚间）

### 3.3 医患对话用例

```
医生
├── 查看会话列表
├── 发送消息
├── 接收消息
├── 查看消息历史
└── 删除会话
```

**用例描述**：
- **查看会话列表**：医生可以查看与所有患者的会话列表
- **发送消息**：医生可以向患者发送文本、图片、文件等消息
- **接收消息**：医生可以实时接收患者的消息
- **查看消息历史**：医生可以查看会话中的历史消息
- **删除会话**：医生可以删除不需要的会话

### 3.4 接诊记录用例

```
医生
├── 创建接诊记录
├── 查看接诊记录
├── 编辑接诊记录
└── 完成接诊
```

**用例描述**：
- **创建接诊记录**：医生可以为预约创建接诊记录
- **查看接诊记录**：医生可以查看自己的所有接诊记录
- **编辑接诊记录**：医生可以编辑接诊记录（诊断结果、处方等）
- **完成接诊**：医生可以标记接诊为已完成，系统自动通知患者

### 3.5 评价管理用例

```
医生
├── 查看评价列表
├── 查看评价详情
└── 回复评价
```

**用例描述**：
- **查看评价列表**：医生可以查看患者对自己的所有评价
- **查看评价详情**：医生可以查看评价的详细内容
- **回复评价**：医生可以回复患者的评价

### 3.6 数据统计用例

```
医生
├── 查看今日预约数
├── 查看待处理预约数
└── 查看接诊记录统计
```

**用例描述**：
- **查看今日预约数**：医生可以查看今日的预约数量
- **查看待处理预约数**：医生可以查看待处理的预约数量
- **查看接诊记录统计**：医生可以查看自己的接诊记录统计

### 3.7 养生知识社区用例

```
医生
├── 浏览文章列表
├── 发布文章
├── 编辑文章
├── 删除文章
├── 点赞文章
├── 收藏文章
└── 评论文章
```

**用例描述**：
- **浏览文章列表**：医生可以浏览所有养生文章
- **发布文章**：医生可以发布专业的养生知识文章
- **编辑文章**：医生可以编辑自己发布的文章
- **删除文章**：医生可以删除自己发布的文章
- **点赞文章**：医生可以对文章进行点赞
- **收藏文章**：医生可以收藏喜欢的文章
- **评论文章**：医生可以对文章进行评论

---

## 4. 管理员用例图

### 4.1 用户管理用例

```
管理员
├── 登录系统
├── 修改密码
├── 查看用户列表
├── 添加用户
├── 编辑用户信息
├── 删除用户
├── 重置用户密码
└── 查看用户详情
```

**用例描述**：
- **登录系统**：管理员使用管理员账号登录系统
- **修改密码**：管理员可以修改登录密码
- **查看用户列表**：管理员可以查看所有用户（患者、医生）列表
- **添加用户**：管理员可以添加新用户（患者、医生）
- **编辑用户信息**：管理员可以编辑用户信息
- **删除用户**：管理员可以删除用户（软删除）
- **重置用户密码**：管理员可以重置用户的密码
- **查看用户详情**：管理员可以查看用户的详细信息

### 4.2 科室管理用例

```
管理员
├── 查看科室列表
├── 添加科室
├── 编辑科室信息
└── 删除科室
```

**用例描述**：
- **查看科室列表**：管理员可以查看所有科室列表
- **添加科室**：管理员可以添加新科室
- **编辑科室信息**：管理员可以编辑科室信息（名称、描述等）
- **删除科室**：管理员可以删除科室

### 4.3 医生管理用例

```
管理员
├── 查看医生列表
├── 添加医生
├── 编辑医生信息
├── 删除医生
├── 分配医生到科室
└── 查看医生详情
```

**用例描述**：
- **查看医生列表**：管理员可以查看所有医生列表
- **添加医生**：管理员可以添加新医生
- **编辑医生信息**：管理员可以编辑医生信息（姓名、职称、专长等）
- **删除医生**：管理员可以删除医生
- **分配医生到科室**：管理员可以将医生分配到科室
- **查看医生详情**：管理员可以查看医生的详细信息

### 4.4 预约管理用例

```
管理员
├── 查看所有预约记录
├── 查看预约详情
├── 取消预约
└── 查看预约统计
```

**用例描述**：
- **查看所有预约记录**：管理员可以查看系统中所有预约记录
- **查看预约详情**：管理员可以查看预约的详细信息
- **取消预约**：管理员可以取消预约（特殊情况）
- **查看预约统计**：管理员可以查看预约的统计数据

### 4.5 内容管理用例

```
管理员
├── 查看文章列表
├── 审核文章
├── 删除文章
├── 查看药膳列表
├── 编辑药膳信息
├── 查看穴位列表
└── 编辑穴位信息
```

**用例描述**：
- **查看文章列表**：管理员可以查看所有文章列表
- **审核文章**：管理员可以审核用户发布的文章
- **删除文章**：管理员可以删除不当文章
- **查看药膳列表**：管理员可以查看所有药膳列表
- **编辑药膳信息**：管理员可以编辑药膳信息
- **查看穴位列表**：管理员可以查看所有穴位列表
- **编辑穴位信息**：管理员可以编辑穴位信息

### 4.6 系统配置用例

```
管理员
├── 查看系统配置
├── 编辑系统配置
├── 查看操作日志
└── 查看数据字典
```

**用例描述**：
- **查看系统配置**：管理员可以查看系统配置信息
- **编辑系统配置**：管理员可以编辑系统配置
- **查看操作日志**：管理员可以查看系统的操作日志
- **查看数据字典**：管理员可以查看和管理数据字典

### 4.7 数据统计用例

```
管理员
├── 查看系统用户数
├── 查看今日预约数
├── 查看医生工作量统计
├── 查看科室预约热力图
├── 查看实时预约数据看板
└── 导出统计数据
```

**用例描述**：
- **查看系统用户数**：管理员可以查看系统中的用户总数
- **查看今日预约数**：管理员可以查看今日的预约数量
- **查看医生工作量统计**：管理员可以查看医生的工作量统计（柱状图）
- **查看科室预约热力图**：管理员可以查看各科室在不同时段的预约热度
- **查看实时预约数据看板**：管理员可以查看实时预约数据（仪表盘、饼图）
- **导出统计数据**：管理员可以导出统计数据

### 4.8 会话管理用例

```
管理员
├── 创建会话（客服）
├── 查看会话列表
├── 发送消息
└── 接收消息
```

**用例描述**：
- **创建会话（客服）**：管理员可以与用户创建会话，用于客服功能
- **查看会话列表**：管理员可以查看与所有用户的会话列表
- **发送消息**：管理员可以向用户发送消息
- **接收消息**：管理员可以接收用户的消息

---

## 5. 系统用例关系

### 5.1 包含关系（Include）

- **登录系统** 包含 **验证身份**
- **预约挂号** 包含 **检查号源可用性**
- **提交体质测试** 包含 **计算体质得分**
- **发送消息** 包含 **推送通知**

### 5.2 扩展关系（Extend）

- **查看预约记录** 扩展 **取消预约**（当预约状态为待就诊时）
- **查看测试结果** 扩展 **查看测试报告**（当用户需要详细报告时）
- **查看文章详情** 扩展 **点赞文章**（当用户喜欢文章时）
- **查看文章详情** 扩展 **收藏文章**（当用户想收藏文章时）

### 5.3 泛化关系（Generalization）

- **患者** 和 **医生** 泛化为 **用户**
- **浏览药膳列表** 和 **搜索药膳** 泛化为 **查找药膳**
- **浏览文章列表** 和 **搜索文章** 泛化为 **查找文章**

---

## 6. 用例优先级

### 6.1 高优先级用例（P0）

- 用户注册与登录
- 预约挂号
- 查看预约记录
- 进行体质测试
- 查看测试结果
- 医患对话
- 查看消息通知

### 6.2 中优先级用例（P1）

- 健康档案管理
- 健康打卡
- 药膳推荐
- 穴位指导
- 文章浏览
- 评价医生
- 数据统计

### 6.3 低优先级用例（P2）

- 文章发布
- 文章评论
- 搜索历史
- 热门搜索词
- 体质测试历史对比
- 健康数据统计图表

---

## 7. 用例详细描述示例

### 7.1 用例：预约挂号

**用例名称**：预约挂号

**参与者**：患者

**前置条件**：
- 患者已登录系统
- 患者已选择科室和医生

**主流程**：
1. 患者选择预约日期
2. 系统显示该日期的可用时段
3. 患者选择时段
4. 系统检查号源是否可用
5. 系统分配排队号
6. 患者确认预约信息
7. 系统创建预约记录
8. 系统发送预约确认通知给患者
9. 系统发送新预约通知给医生
10. 用例结束

**后置条件**：
- 预约记录已创建
- 号源已占用
- 患者和医生已收到通知

**异常流程**：
- 3a. 如果选择的时段已满，系统提示患者选择其他时段
- 4a. 如果号源不可用，系统提示患者选择其他时间
- 7a. 如果创建预约失败，系统提示错误信息

**特殊需求**：
- 预约成功后，号源自动减少
- 预约取消后，号源自动释放

---

## 8. 附录

### 8.1 用例图符号说明

- **参与者（Actor）**：使用系统的人或外部系统
- **用例（Use Case）**：系统提供的功能
- **系统边界**：系统的范围
- **包含关系（Include）**：一个用例必须包含另一个用例
- **扩展关系（Extend）**：一个用例可以扩展另一个用例
- **泛化关系（Generalization）**：一个用例是另一个用例的特殊情况

### 8.2 参考资料

- UML用例图规范
- 需求分析文档

---

**文档结束**

